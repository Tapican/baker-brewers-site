<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Order Item</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Nunito+Sans:wght@400;600;700&family=Canva+Sans&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="orderpage.css">
  </head>
<body>

    <!-- ------------------------------------------------- -->
    <!-- HEADER / NAVBAR -->
    <!-- ------------------------------------------------- -->
    <nav class="navbar navbar-expand-lg border-bottom" style="border-color:#a2783b !important;">
      <div class="container">

        <!-- Logo -->
        <a class="navbar-brand d-flex align-items-center" href="#">
          <img src="transparentlogo.png" height="60px" class="border-top" style="border-color:#a2783b !important;">
        </a>

        <!-- Burger Button -->
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collapsible Menu -->
        <div class="collapse navbar-collapse" id="navbarMenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="frontendboot.html#home_section">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="frontendboot.html#menu_section">Menu</a></li>
            <li class="nav-item"><a class="nav-link" href="frontendboot.html#delivery_section">Delivery</a></li>
            <li class="nav-item"><a class="nav-link" href="frontendboot.html#location_section">Find Our Store!</a></li>
          </ul>
        </div>

      </div>
    </nav>

    <!-- ------------------------------------------------- -->
    <!-- ORDER ITEM -->
    <!-- ------------------------------------------------- -->
    <div class="container my-5 p-4 order-card shadow">
      <div class="row g-4 align-items-center">

        <!-- LEFT: IMAGE -->
          <div class="col-md-4">
            <img id="order-item-image" class="img-fluid rounded shadow" alt="">
          </div>

        <!-- RIGHT: CONTROLS -->
        <div class="col-md-8">

          <h2 id="order-item-name"></h2>

          <!-- SIZE -->
          <div id="size-section" class="mt-3">
            <h6>SIZE:</h6>
            <button class="btn btn-option" data-size="small" id="size-small">SMALL</button>
            <button class="btn btn-option" data-size="large" id="size-large">LARGE (+₱20)</button>
          </div>

          <!-- TEMPERATURE -->
          <div id="temp-section" class="mt-3">
            <h6>TEMPERATURE:</h6>
            <button class="btn btn-option" data-temp="hot" id="temp-hot">HOT</button>
            <button class="btn btn-option" data-temp="cold" id="temp-cold">COLD</button>
          </div>

          <!-- QUANTITY -->
          <h6 class="mt-3">QUANTITY:</h6>
          <div class="d-flex align-items-center">
            <button id="minus" class="qty-btn">−</button>
            <span id="quantity" class="mx-3 fs-4">1</span>
            <button id="plus" class="qty-btn">+</button>
          </div>

          <!-- TOTAL -->
          <h6 class="mt-3">TOTAL:</h6>
          <div class="total-box">
            ₱ <span id="total">0</span>
          </div>

          <button class="btn btn-addcart mt-3">ADD TO CART</button>
        </div>

      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!--
    <script>
      function getParam(key) {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get(key);
      }

      document.addEventListener("DOMContentLoaded", function () {

          const name = getParam("name");
          const basePrice = Number(getParam("price"));
          const image = getParam("image");
          const options = getParam("options")?.split(",") || [];

          // Fill basic details
          document.getElementById("order-item-image").src = image;
          document.getElementById("order-item-name").textContent = name;

          // Store working variables
          let size = "small";
          let temp = "hot";
          let quantity = 1;

          // Disable unavailable options
          if (!options.includes("sizes")) {
              document.getElementById("size-area").style.display = "none";
              size = "regular";
          }

          if (!options.includes("temp")) {
              document.getElementById("temp-area").style.display = "none";
              temp = "default";
          }

          // Button logic - SIZE
          document.querySelectorAll(".btn-size").forEach(btn => {
              btn.addEventListener("click", function () {
                  document.querySelectorAll(".btn-size").forEach(b => b.classList.remove("active"));
                  this.classList.add("active");

                  size = this.dataset.size;
                  updateTotal();
              });
          });

          // Button logic - TEMP
          document.querySelectorAll(".btn-temp").forEach(btn => {
              btn.addEventListener("click", function () {
                  document.querySelectorAll(".btn-temp").forEach(b => b.classList.remove("active"));
                  this.classList.add("active");

                  temp = this.dataset.temp;
                  updateTotal();
              });
          });

          // Quantity controls
          document.getElementById("plus").addEventListener("click", () => {
              quantity++;
              document.getElementById("quantity").textContent = quantity;
              updateTotal();
          });

          document.getElementById("minus").addEventListener("click", () => {
              if (quantity > 1) quantity--;
              document.getElementById("quantity").textContent = quantity;
              updateTotal();
          });

          // Compute total pricing
          function updateTotal() {
              let total = basePrice;

              // Upsize adds ₱20
              if (size === "large") {
                  total += 20;
              }

              total *= quantity;

              document.getElementById("total").textContent = total;
              document.getElementById("order-item-price").textContent = total;
          }

          updateTotal();
      });
    </script>
    -->

    <script>
      function getParam(key) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(key);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const name = getParam("name");
        const basePrice = Number(getParam("price"));
        const priceHot = Number(getParam("price-hot"));
        const priceCold = Number(getParam("price-cold"));
        const image = getParam("image");
        const options = (getParam("options") || "none").split(",");
        const type = getParam("type");

        document.getElementById("order-item-name").textContent = name;
        document.getElementById("order-item-image").src = image;

        let size = "small";
        let temp = "hot";
        let quantity = 1;

        const sizeSection = document.getElementById("size-section");
        const tempSection = document.getElementById("temp-section");

        const btnSizeSmall = document.getElementById("size-small");
        const btnSizeLarge = document.getElementById("size-large");
        const btnTempHot = document.getElementById("temp-hot");
        const btnTempCold = document.getElementById("temp-cold");

        // ======================================================
        //    FOOD vs BEVERAGE HANDLING
        // ======================================================

        if (type === "food") {
          // Hide all customization except quantity
          sizeSection.style.display = "none";
          tempSection.style.display = "none";

          size = "food";
          temp = "none";

        } else if (type === "beverage") {

          // ------------------ SIZE RULES ------------------
          if (!options.includes("sizes")) {
            sizeSection.style.display = "none";
            size = "regular";
          }

          // ------------------ TEMP RULES ------------------
          if (!options.includes("temp")) {
            tempSection.style.display = "none";
            temp = "normal";
          }

          // Blended drinks (none) → always cold + no size
          if (options.includes("none")) {
            sizeSection.style.display = "none";
            tempSection.style.display = "block";
            btnTempHot.classList.add("disabled");
            btnTempCold.classList.add("active");
            temp = "cold";
          }

          // Matcha Latte (sizes but no hot)
          if (options.includes("sizes") && !options.includes("temp") && name.toLowerCase().includes("matcha latte")) {
            tempSection.style.display = "block";
            btnTempHot.classList.add("disabled");
            btnTempCold.classList.add("active");
            temp = "cold";
          }

          // Matcha Blend → cannot upsize, cannot hot
          if (name.toLowerCase().includes("matcha blend")) {
            sizeSection.style.display = "none";
            tempSection.style.display = "block";
            btnTempHot.classList.add("disabled");
            btnTempCold.classList.add("active");
            temp = "cold";
          }
        }

        // ======================================================
        //        BUTTON INTERACTIONS
        // ======================================================

        document.querySelectorAll("[data-size]").forEach(btn => {
          btn.addEventListener("click", () => {
            if (btn.classList.contains("disabled")) return;

            document.querySelectorAll("[data-size]").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            size = btn.dataset.size;
            updateTotal();
          });
        });

        document.querySelectorAll("[data-temp]").forEach(btn => {
          btn.addEventListener("click", () => {
            if (btn.classList.contains("disabled")) return;

            document.querySelectorAll("[data-temp]").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            temp = btn.dataset.temp;
            updateTotal();
          });
        });

        document.getElementById("plus").onclick = () => {
          quantity++;
          document.getElementById("quantity").textContent = quantity;
          updateTotal();
        };

        document.getElementById("minus").onclick = () => {
          if (quantity > 1) quantity--;
          document.getElementById("quantity").textContent = quantity;
          updateTotal();
        };

        // ======================================================
        //        PRICING SYSTEM
        // ======================================================

        function updateTotal() {
          let total = 0;

          // FOOD PRICING
          if (type === "food") {
            total = basePrice * quantity;
          }

          // BEVERAGE PRICING
          else if (type === "beverage") {

            // base price depends on temperature
            let tempPrice = temp === "hot" ? priceHot : priceCold;

            // upsize rule
            if (size === "large") tempPrice += 20;

            total = tempPrice * quantity;
          }

          document.getElementById("total").textContent = total;
        }

        updateTotal();
      });
      </script>


  </body>
</html>
